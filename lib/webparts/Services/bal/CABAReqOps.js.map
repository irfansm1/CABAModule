{"version":3,"sources":["webparts/Services/bal/CABAReqOps.ts"],"names":[],"mappings":"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","file":"webparts/Services/bal/CABAReqOps.js","sourcesContent":["//import { IEximTravelBlockProps } from '../interface/IEximTravelBlockProps';\nimport { ICabaModuleProps } from '../interface/ICabaModuleProps';\nimport { IEximCabaProps } from '../interface/IEximCabaProps';\nimport {IRankingMaster} from '../interface/IRankigMaster';\n\nimport SPCRUDOPS from '../dal/spcrudops';\n\nexport interface CABAReqOps {\n    getCABAAdminData(props: IEximCabaProps): Promise<IEximCabaProps>;\n    getRankingMasterData(props: IRankingMaster): Promise<IRankingMaster>;\n    getUserAccomodationData(strFilter: string, sorting: any, props: IRankingMaster): Promise<IRankingMaster>;\n   }\n\nexport default function CABAReqOps() {\n    const spCrudOps = SPCRUDOPS();\n\n    const getCABAAdminData = async (props: ICabaModuleProps): Promise<IEximCabaProps[]> => {\n        \n        var currentUserLogin = props.currentSPContext.pageContext._user._displayName;\n        // var currentUserLogin= props.currentSPContext.pageContext._user.id;\n        //  var currentUserLogin=(props.currentSPContext.pageContext._user._displayName==\"spfarmadmin\")?\"Farm Admin\":props.currentSPContext.pageContext._user._displayName;\n\n        return await (await spCrudOps).getData(\"CABA_FlatMasters\"\n            , \"*,Id,CABAFlatID,Author/Title,Author/Name,FlatSpecifications/FlatSpecifications,FlatSpecifications/Id,SocietyName/SocietyName,SocietyName/Id,OccupancyType/OccupancyType,OccupancyType/Id,FlatType/FlatType,FlatType/Id,OfficeLocation/OfficeLocation,OfficeLocation/Id,Wing,FlatNo,ActiveStatus,AssignedDate,EndDate,AssignedBy/Name,AssignedBy/Title,AssignedBy/Id,AssignedTo/Name,AssignedTo/Title,AssignedTo/Id\"\n            , \"FlatSpecifications,Author,SocietyName,AssignedBy,AssignedTo,OccupancyType,FlatType,OfficeLocation\"\n            //, \"(Author/Title eq '\"+(currentUserLogin)+\"') or (OnBehalfOf/Name eq '\"+encodeURIComponent(currentUserLogin)+\"')\"\n            , \"(Author/Title) eq '\" + (currentUserLogin) + \"'\"\n            , { column: 'Id', isAscending: false }, props).then(results => {\n                console.log(results);\n                let brr: Array<IEximCabaProps> = new Array<IEximCabaProps>();\n                results.map(item => {\n                    brr.push({\n                        ID:item.ID,\n                         FlatSpecifications:item.FlatSpecifications !== undefined && item.FlatSpecifications !== null ? item.FlatSpecifications.FlatSpecifications: '',                       \n                         FlatType:item.FlatType !== undefined ? item.FlatType.FlatType: '',                        \n                         SocietyName:item.SocietyName !== undefined && item.SocietyName !== null ? item.SocietyName.SocietyName: '',\n                         Wing:item.Wing,\n                         FlatNo:item.FlatNo,\n                         OccupancyType:item.OccupancyType !== undefined && item.OccupancyType !== null ? item.OccupancyType.OccupancyType: '',\n                         ActiveStatus:item.ActiveStatus,\n                         CABAFlatID:item.CABAFlatID,\n                         OfficeLocation:item.OfficeLocation !==undefined && item.OfficeLocation !==null ? item.OfficeLocation.OfficeMaster:'',\n                         AssignedBy:item.AssignedBy,\n                         Occupied:item.Occupied,\n                         Publish:item.Publish\n\n                    });\n                });\n\n                return brr;\n            });\n    };\n\n    const getRankingMasterData = async (props: ICabaModuleProps): Promise<IRankingMaster[]> => {\n        \n        var currentUserLogin = props.currentSPContext.pageContext._user._displayName;\n        // var currentUserLogin= props.currentSPContext.pageContext._user.id;\n        //  var currentUserLogin=(props.currentSPContext.pageContext._user._displayName==\"spfarmadmin\")?\"Farm Admin\":props.currentSPContext.pageContext._user._displayName;\n\n        return await (await spCrudOps).getData(\"Ranking_Master\"\n            , \"*,Id,DateofJoiningAppointment\"\n            , \"\"\n            //, \"(Author/Title eq '\"+(currentUserLogin)+\"') or (OnBehalfOf/Name eq '\"+encodeURIComponent(currentUserLogin)+\"')\"\n            , \"(Author/Title) eq '\" + (currentUserLogin) + \"'\"\n            , { column: 'Id', isAscending: false }, props).then(results => {\n                console.log(results);\n                let brr: Array<IRankingMaster> = new Array<IRankingMaster>();\n                results.map(item => {\n                    brr.push({\n                        Id:item.Id,\n                        DateofJoiningAppointment:item.DateofJoiningAppointment,\n                        Seniority:item.Seniority,\n                        Transfer:item.Transfer,\n                        YearofServiceinPresentGrade:item.YearofServiceinPresentGrade,\n                        Spouse:item.Spouse,\n                        Total:item.Total,\n                        Rank:item.Rank ,\n                        EmployeeCode:item.EmployeeCode !==undefined && item.EmployeeCode !==null ? item.EmployeeCode:'',\n                        Designation:item.Designation !==undefined && item.Designation !==null ? item.Designation:'',\n\n                    });\n                });\n\n                return brr;\n            });\n    };\n\n   \n    const getUserAccomodationData = async (strFilter: string, sorting: any, props: ICabaModuleProps): Promise<IEximCabaProps[]> => {\n        debugger;\n        var currentUserLogin = props.currentSPContext.pageContext._user._displayName;\n        // var currentUserLogin=(props.currentSPContext.pageContext._user._displayName==\"spfarmadmin\")?\"Farm Admin\":props.currentSPContext.pageContext._user._displayName;\n\n        return await (await spCrudOps).getData(\"CABA_FlatMasters\"\n            , \"*,Id,CABAFlatID,Author/Title,Author/Name,FlatSpecifications/FlatSpecifications,FlatSpecifications/Id,SocietyName/SocietyName,SocietyName/Id,OccupancyType/OccupancyType,OccupancyType/Id,FlatType/FlatType,FlatType/Id,OfficeLocation/OfficeLocation,OfficeLocation/Id,Wing,FlatNo,ActiveStatus,AssignedDate,EndDate,AssignedBy/Name,AssignedBy/Title,AssignedBy/Id,AssignedTo/Name,AssignedTo/Title,AssignedTo/Id\"\n            , \"FlatSpecifications,Author,SocietyName,AssignedBy,AssignedTo,OccupancyType,FlatType,OfficeLocation\"\n            , strFilter\n            // , \"(Author/Title eq '\"+(currentUserLogin)+\"') or (OnBehalfOf/Name eq '\"+encodeURIComponent(currentUserLogin)+\"')\"\n            , { column: 'Id', isAscending: false }, props).then(results => {\n                console.log(results);\n                let brr: Array<IEximCabaProps> = new Array<IEximCabaProps>();\n                results.sort((a, b) => b.Id - a.Id).map(item => {\n                    brr.push({\n                        AuthorId: item.AuthorId,                        \n                        ID:item.ID,\n                        FlatSpecifications:item.FlatSpecifications !== undefined && item.FlatSpecifications !== null ? item.FlatSpecifications.FlatSpecifications: '',                       \n                        FlatType:item.FlatType !== undefined ? item.FlatType.FlatType: '',                        \n                        SocietyName:item.SocietyName !== undefined && item.SocietyName !== null ? item.SocietyName.SocietyName: '',\n                        Wing:item.Wing,\n                        FlatNo:item.FlatNo,\n                        OccupancyType:item.OccupancyType !== undefined && item.OccupancyType !== null ? item.OccupancyType.OccupancyType: '',\n                        ActiveStatus:item.ActiveStatus,\n                        CABAFlatID:item.CABAFlatID,\n                        OfficeLocation:item.OfficeLocation !==undefined && item.OfficeLocation !==null ? item.OfficeLocation.OfficeMaster:'',\n                        AssignedBy:item.AssignedBy,\n                        Occupied:item.Occupied,\n                        Publish:item.Publish\n\n                    });\n                });\n\n                return brr;\n            });\n    };\n\n    return {\n        getCABAAdminData,\n        getRankingMasterData,\n        getUserAccomodationData\n\n    };\n}"],"sourceRoot":"../../../../src"}